93c93
<         8:   91:static void indicate_open_complete(SASL_CLIENT_IO_INSTANCE* sasl_client_io_instance, IO_OPEN_RESULT open_result)
---
>         2:   91:static void indicate_open_complete(SASL_CLIENT_IO_INSTANCE* sasl_client_io_instance, IO_OPEN_RESULT open_result)
95c95
<         8:   93:    if (sasl_client_io_instance->on_io_open_complete != NULL)
---
>         2:   93:    if (sasl_client_io_instance->on_io_open_complete != NULL)
97c97
<         8:   95:        sasl_client_io_instance->on_io_open_complete(sasl_client_io_instance->on_io_open_complete_context, open_result);
---
>         2:   95:        sasl_client_io_instance->on_io_open_complete(sasl_client_io_instance->on_io_open_complete_context, open_result);
99c99
<         8:   97:}
---
>         2:   97:}
131c131
<         8:  129:static void handle_error(SASL_CLIENT_IO_INSTANCE* sasl_client_io_instance)
---
>         6:  129:static void handle_error(SASL_CLIENT_IO_INSTANCE* sasl_client_io_instance)
133c133
<         8:  131:    switch (sasl_client_io_instance->io_state)
---
>         6:  131:    switch (sasl_client_io_instance->io_state)
139c139
<         8:  137:    case IO_STATE_OPENING_UNDERLYING_IO:
---
>         6:  137:    case IO_STATE_OPENING_UNDERLYING_IO:
141c141
<         8:  139:        if (xio_close(sasl_client_io_instance->underlying_io, on_underlying_io_close_complete, sasl_client_io_instance) != 0)
---
>         6:  139:        if (xio_close(sasl_client_io_instance->underlying_io, on_underlying_io_close_complete, sasl_client_io_instance) != 0)
143,144c143,144
<         8:  141:            sasl_client_io_instance->io_state = IO_STATE_NOT_OPEN;
<         8:  142:            indicate_open_complete(sasl_client_io_instance, IO_OPEN_ERROR);
---
>         2:  141:            sasl_client_io_instance->io_state = IO_STATE_NOT_OPEN;
>         2:  142:            indicate_open_complete(sasl_client_io_instance, IO_OPEN_ERROR);
146c146
<         8:  144:        break;
---
>         6:  144:        break;
153c153
<         8:  151:}
---
>         6:  151:}
187c187
<         8:  185:static void on_underlying_io_open_complete(void* context, IO_OPEN_RESULT open_result)
---
>         6:  185:static void on_underlying_io_open_complete(void* context, IO_OPEN_RESULT open_result)
189c189
<         8:  187:    SASL_CLIENT_IO_INSTANCE* sasl_client_io_instance = (SASL_CLIENT_IO_INSTANCE*)context;
---
>         6:  187:    SASL_CLIENT_IO_INSTANCE* sasl_client_io_instance = (SASL_CLIENT_IO_INSTANCE*)context;
191c191
<         8:  189:    switch (sasl_client_io_instance->io_state)
---
>         6:  189:    switch (sasl_client_io_instance->io_state)
204,205c204,205
<         8:  202:    case IO_STATE_OPENING_UNDERLYING_IO:
<         8:  203:        if (open_result == IO_OPEN_OK)
---
>         6:  202:    case IO_STATE_OPENING_UNDERLYING_IO:
>         6:  203:        if (open_result == IO_OPEN_OK)
231c231
<         8:  229:            handle_error(sasl_client_io_instance);
---
>         6:  229:            handle_error(sasl_client_io_instance);
234c234
<         8:  232:        break;
---
>         6:  232:        break;
236c236
<         8:  234:}
---
>         6:  234:}
1076,1077c1076,1077
<     #####: 1074:            LogError("Open called while already OPEN");
<     #####: 1075:            result = MU_FAILURE;
---
>         2: 1074:            LogError("Open called while already OPEN");
>         2: 1075:            result = MU_FAILURE;
1081,1092c1081,1092
<         8: 1079:            sasl_client_io_instance->on_bytes_received = on_bytes_received;
<         8: 1080:            sasl_client_io_instance->on_io_open_complete = on_io_open_complete;
<         8: 1081:            sasl_client_io_instance->on_io_error = on_io_error;
<         8: 1082:            sasl_client_io_instance->on_bytes_received_context = on_bytes_received_context;
<         8: 1083:            sasl_client_io_instance->on_io_open_complete_context = on_io_open_complete_context;
<         8: 1084:            sasl_client_io_instance->on_io_error_context = on_io_error_context;
<         8: 1085:            sasl_client_io_instance->sasl_header_exchange_state = SASL_HEADER_EXCHANGE_IDLE;
<         8: 1086:            sasl_client_io_instance->sasl_client_negotiation_state = SASL_CLIENT_NEGOTIATION_NOT_STARTED;
<         8: 1087:            sasl_client_io_instance->header_bytes_received = 0;
<         8: 1088:            sasl_client_io_instance->io_state = IO_STATE_OPENING_UNDERLYING_IO;
<         8: 1089:            sasl_client_io_instance->is_trace_on = 0;
<         8: 1090:            sasl_client_io_instance->is_trace_on_set = 0;
---
>         6: 1079:            sasl_client_io_instance->on_bytes_received = on_bytes_received;
>         6: 1080:            sasl_client_io_instance->on_io_open_complete = on_io_open_complete;
>         6: 1081:            sasl_client_io_instance->on_io_error = on_io_error;
>         6: 1082:            sasl_client_io_instance->on_bytes_received_context = on_bytes_received_context;
>         6: 1083:            sasl_client_io_instance->on_io_open_complete_context = on_io_open_complete_context;
>         6: 1084:            sasl_client_io_instance->on_io_error_context = on_io_error_context;
>         6: 1085:            sasl_client_io_instance->sasl_header_exchange_state = SASL_HEADER_EXCHANGE_IDLE;
>         6: 1086:            sasl_client_io_instance->sasl_client_negotiation_state = SASL_CLIENT_NEGOTIATION_NOT_STARTED;
>         6: 1087:            sasl_client_io_instance->header_bytes_received = 0;
>         6: 1088:            sasl_client_io_instance->io_state = IO_STATE_OPENING_UNDERLYING_IO;
>         6: 1089:            sasl_client_io_instance->is_trace_on = 0;
>         6: 1090:            sasl_client_io_instance->is_trace_on_set = 0;
1096c1096
<         8: 1094:            if (xio_open(sasl_client_io_instance->underlying_io, on_underlying_io_open_complete, sasl_client_io_instance, on_underlying_io_bytes_received, sasl_client_io_instance, on_underlying_io_error, sasl_client_io_instance) != 0)
---
>         6: 1094:            if (xio_open(sasl_client_io_instance->underlying_io, on_underlying_io_open_complete, sasl_client_io_instance, on_underlying_io_bytes_received, sasl_client_io_instance, on_underlying_io_error, sasl_client_io_instance) != 0)
1099,1100c1099,1100
<         8: 1097:                LogError("xio_open failed");
<         8: 1098:                result = MU_FAILURE;
---
>         6: 1097:                LogError("xio_open failed");
>         6: 1098:                result = MU_FAILURE;
