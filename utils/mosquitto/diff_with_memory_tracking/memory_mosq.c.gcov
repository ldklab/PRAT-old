64c64
<     #####:   62:	if(mem_limit && memcount + size > mem_limit){
---
>         -:   62:	if(mem_limit && memcount + size > mem_limit){
71,74c71,74
<     #####:   69:	if(mem){
<     #####:   70:		memcount += malloc_usable_size(mem);
<     #####:   71:		if(memcount > max_memcount){
<     #####:   72:			max_memcount = memcount;
---
>         -:   69:	if(mem){
>         -:   70:		memcount += malloc_usable_size(mem);
>         -:   71:		if(memcount > max_memcount){
>         -:   72:			max_memcount = memcount;
79c79
<         -:   77:	return mem;
---
>     #####:   77:	return mem;
85c85
<     #####:   83:	if(!mem){
---
>         -:   83:	if(!mem){
88c88
<     #####:   86:	memcount -= malloc_usable_size(mem);
---
>         -:   86:	memcount -= malloc_usable_size(mem);
91c91
<         -:   89:}
---
>     #####:   89:}
96c96
<     #####:   94:	if(mem_limit && memcount + size > mem_limit){
---
>         -:   94:	if(mem_limit && memcount + size > mem_limit){
103,106c103,106
<     #####:  101:	if(mem){
<     #####:  102:		memcount += malloc_usable_size(mem);
<     #####:  103:		if(memcount > max_memcount){
<     #####:  104:			max_memcount = memcount;
---
>         -:  101:	if(mem){
>         -:  102:		memcount += malloc_usable_size(mem);
>         -:  103:		if(memcount > max_memcount){
>         -:  104:			max_memcount = memcount;
111c111
<         -:  109:	return mem;
---
>     #####:  109:	return mem;
115c115
<     #####:  113:unsigned long mosquitto__memory_used(void)
---
>         -:  113:unsigned long mosquitto__memory_used(void)
117c117
<     #####:  115:	return memcount;
---
>         -:  115:	return memcount;
120c120
<     #####:  118:unsigned long mosquitto__max_memory_used(void)
---
>         -:  118:unsigned long mosquitto__max_memory_used(void)
122c122
<     #####:  120:	return max_memcount;
---
>         -:  120:	return max_memcount;
129c129
<     #####:  127:	if(mem_limit && memcount + size > mem_limit){
---
>         -:  127:	if(mem_limit && memcount + size > mem_limit){
135,136c135,136
<     #####:  133:	if(ptr){
<     #####:  134:		memcount -= malloc_usable_size(ptr);
---
>         -:  133:	if(ptr){
>         -:  134:		memcount -= malloc_usable_size(ptr);
142,145c142,145
<     #####:  140:	if(mem){
<     #####:  141:		memcount += malloc_usable_size(mem);
<     #####:  142:		if(memcount > max_memcount){
<     #####:  143:			max_memcount = memcount;
---
>         -:  140:	if(mem){
>         -:  141:		memcount += malloc_usable_size(mem);
>         -:  142:		if(memcount > max_memcount){
>         -:  143:			max_memcount = memcount;
150c150
<         -:  148:	return mem;
---
>     #####:  148:	return mem;
156c156
<     #####:  154:	if(mem_limit && memcount + strlen(s) > mem_limit){
---
>         -:  154:	if(mem_limit && memcount + strlen(s) > mem_limit){
163,166c163,166
<     #####:  161:	if(str){
<     #####:  162:		memcount += malloc_usable_size(str);
<     #####:  163:		if(memcount > max_memcount){
<     #####:  164:			max_memcount = memcount;
---
>         -:  161:	if(str){
>         -:  162:		memcount += malloc_usable_size(str);
>         -:  163:		if(memcount > max_memcount){
>         -:  164:			max_memcount = memcount;
171c171
<         -:  169:	return str;
---
>     #####:  169:	return str;
