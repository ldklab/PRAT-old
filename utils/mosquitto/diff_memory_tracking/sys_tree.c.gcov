378c378
<     #####:  110:static void sys_tree__update_memory(struct mosquitto_db *db, char *buf)
---
>         -:  110:static void sys_tree__update_memory(struct mosquitto_db *db, char *buf)
380,382c380,382
<     #####:  112:	static unsigned long current_heap = -1;
<     #####:  113:	static unsigned long max_heap = -1;
<     #####:  114:	unsigned long value_ul;
---
>         -:  112:	static unsigned long current_heap = -1;
>         -:  113:	static unsigned long max_heap = -1;
>         -:  114:	unsigned long value_ul;
384,388c384,388
<     #####:  116:	value_ul = mosquitto__memory_used();
<     #####:  117:	if(current_heap != value_ul){
<     #####:  118:		current_heap = value_ul;
<     #####:  119:		snprintf(buf, BUFLEN, "%lu", current_heap);
<     #####:  120:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/current", SYS_TREE_QOS, strlen(buf), buf, 1);
---
>         -:  116:	value_ul = mosquitto__memory_used();
>         -:  117:	if(current_heap != value_ul){
>         -:  118:		current_heap = value_ul;
>         -:  119:		snprintf(buf, BUFLEN, "%lu", current_heap);
>         -:  120:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/current", SYS_TREE_QOS, strlen(buf), buf, 1);
390,394c390,394
<     #####:  122:	value_ul =mosquitto__max_memory_used();
<     #####:  123:	if(max_heap != value_ul){
<     #####:  124:		max_heap = value_ul;
<     #####:  125:		snprintf(buf, BUFLEN, "%lu", max_heap);
<     #####:  126:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/maximum", SYS_TREE_QOS, strlen(buf), buf, 1);
---
>         -:  122:	value_ul =mosquitto__max_memory_used();
>         -:  123:	if(max_heap != value_ul){
>         -:  124:		max_heap = value_ul;
>         -:  125:		snprintf(buf, BUFLEN, "%lu", max_heap);
>         -:  126:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/maximum", SYS_TREE_QOS, strlen(buf), buf, 1);
396,481c396
<     #####:  128:}
< ------------------
< sys_tree__update_memory:
<     #####:  110:static void sys_tree__update_memory(struct mosquitto_db *db, char *buf)
<         -:  111:{
<     #####:  112:	static unsigned long current_heap = -1;
<     #####:  113:	static unsigned long max_heap = -1;
<     #####:  114:	unsigned long value_ul;
<         -:  115:
<     #####:  116:	value_ul = mosquitto__memory_used();
<     #####:  117:	if(current_heap != value_ul){
<     #####:  118:		current_heap = value_ul;
<     #####:  119:		snprintf(buf, BUFLEN, "%lu", current_heap);
<     #####:  120:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/current", SYS_TREE_QOS, strlen(buf), buf, 1);
<         -:  121:	}
<     #####:  122:	value_ul =mosquitto__max_memory_used();
<     #####:  123:	if(max_heap != value_ul){
<     #####:  124:		max_heap = value_ul;
<     #####:  125:		snprintf(buf, BUFLEN, "%lu", max_heap);
<     #####:  126:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/maximum", SYS_TREE_QOS, strlen(buf), buf, 1);
<         -:  127:	}
<     #####:  128:}
< ------------------
< sys_tree__update_memory:
<     #####:  110:static void sys_tree__update_memory(struct mosquitto_db *db, char *buf)
<         -:  111:{
<     #####:  112:	static unsigned long current_heap = -1;
<     #####:  113:	static unsigned long max_heap = -1;
<     #####:  114:	unsigned long value_ul;
<         -:  115:
<     #####:  116:	value_ul = mosquitto__memory_used();
<     #####:  117:	if(current_heap != value_ul){
<     #####:  118:		current_heap = value_ul;
<     #####:  119:		snprintf(buf, BUFLEN, "%lu", current_heap);
<     #####:  120:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/current", SYS_TREE_QOS, strlen(buf), buf, 1);
<         -:  121:	}
<     #####:  122:	value_ul =mosquitto__max_memory_used();
<     #####:  123:	if(max_heap != value_ul){
<     #####:  124:		max_heap = value_ul;
<     #####:  125:		snprintf(buf, BUFLEN, "%lu", max_heap);
<     #####:  126:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/maximum", SYS_TREE_QOS, strlen(buf), buf, 1);
<         -:  127:	}
<     #####:  128:}
< ------------------
< sys_tree__update_memory:
<     #####:  110:static void sys_tree__update_memory(struct mosquitto_db *db, char *buf)
<         -:  111:{
<     #####:  112:	static unsigned long current_heap = -1;
<     #####:  113:	static unsigned long max_heap = -1;
<     #####:  114:	unsigned long value_ul;
<         -:  115:
<     #####:  116:	value_ul = mosquitto__memory_used();
<     #####:  117:	if(current_heap != value_ul){
<     #####:  118:		current_heap = value_ul;
<     #####:  119:		snprintf(buf, BUFLEN, "%lu", current_heap);
<     #####:  120:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/current", SYS_TREE_QOS, strlen(buf), buf, 1);
<         -:  121:	}
<     #####:  122:	value_ul =mosquitto__max_memory_used();
<     #####:  123:	if(max_heap != value_ul){
<     #####:  124:		max_heap = value_ul;
<     #####:  125:		snprintf(buf, BUFLEN, "%lu", max_heap);
<     #####:  126:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/maximum", SYS_TREE_QOS, strlen(buf), buf, 1);
<         -:  127:	}
<     #####:  128:}
< ------------------
< sys_tree__update_memory:
<     #####:  110:static void sys_tree__update_memory(struct mosquitto_db *db, char *buf)
<         -:  111:{
<     #####:  112:	static unsigned long current_heap = -1;
<     #####:  113:	static unsigned long max_heap = -1;
<     #####:  114:	unsigned long value_ul;
<         -:  115:
<     #####:  116:	value_ul = mosquitto__memory_used();
<     #####:  117:	if(current_heap != value_ul){
<     #####:  118:		current_heap = value_ul;
<     #####:  119:		snprintf(buf, BUFLEN, "%lu", current_heap);
<     #####:  120:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/current", SYS_TREE_QOS, strlen(buf), buf, 1);
<         -:  121:	}
<     #####:  122:	value_ul =mosquitto__max_memory_used();
<     #####:  123:	if(max_heap != value_ul){
<     #####:  124:		max_heap = value_ul;
<     #####:  125:		snprintf(buf, BUFLEN, "%lu", max_heap);
<     #####:  126:		db__messages_easy_queue(db, NULL, "$SYS/broker/heap/maximum", SYS_TREE_QOS, strlen(buf), buf, 1);
<         -:  127:	}
<     #####:  128:}
< ------------------
---
>         -:  128:}
743c658
<     #####:  313:		sys_tree__update_memory(db, buf);
---
>         -:  313:		sys_tree__update_memory(db, buf);
963c878
<     #####:  313:		sys_tree__update_memory(db, buf);
---
>         -:  313:		sys_tree__update_memory(db, buf);
1183c1098
<     #####:  313:		sys_tree__update_memory(db, buf);
---
>         -:  313:		sys_tree__update_memory(db, buf);
1403c1318
<     #####:  313:		sys_tree__update_memory(db, buf);
---
>         -:  313:		sys_tree__update_memory(db, buf);
1623c1538
<     #####:  313:		sys_tree__update_memory(db, buf);
---
>         -:  313:		sys_tree__update_memory(db, buf);
