99c99
<     #####:   62:	if(mem_limit && memcount + size > mem_limit){
---
>         -:   62:	if(mem_limit && memcount + size > mem_limit){
106,109c106,109
<     #####:   69:	if(mem){
<     #####:   70:		memcount += malloc_usable_size(mem);
<     #####:   71:		if(memcount > max_memcount){
<     #####:   72:			max_memcount = memcount;
---
>         -:   69:	if(mem){
>         -:   70:		memcount += malloc_usable_size(mem);
>         -:   71:		if(memcount > max_memcount){
>         -:   72:			max_memcount = memcount;
114c114
<         -:   77:	return mem;
---
>     #####:   77:	return mem;
121c121
<     #####:   62:	if(mem_limit && memcount + size > mem_limit){
---
>         -:   62:	if(mem_limit && memcount + size > mem_limit){
128,131c128,131
<     #####:   69:	if(mem){
<     #####:   70:		memcount += malloc_usable_size(mem);
<     #####:   71:		if(memcount > max_memcount){
<     #####:   72:			max_memcount = memcount;
---
>         -:   69:	if(mem){
>         -:   70:		memcount += malloc_usable_size(mem);
>         -:   71:		if(memcount > max_memcount){
>         -:   72:			max_memcount = memcount;
136c136
<         -:   77:	return mem;
---
>     #####:   77:	return mem;
143c143
<     #####:   62:	if(mem_limit && memcount + size > mem_limit){
---
>         -:   62:	if(mem_limit && memcount + size > mem_limit){
150,153c150,153
<     #####:   69:	if(mem){
<     #####:   70:		memcount += malloc_usable_size(mem);
<     #####:   71:		if(memcount > max_memcount){
<     #####:   72:			max_memcount = memcount;
---
>         -:   69:	if(mem){
>         -:   70:		memcount += malloc_usable_size(mem);
>         -:   71:		if(memcount > max_memcount){
>         -:   72:			max_memcount = memcount;
158c158
<         -:   77:	return mem;
---
>     #####:   77:	return mem;
165c165
<     #####:   83:	if(!mem){
---
>         -:   83:	if(!mem){
168c168
<     #####:   86:	memcount -= malloc_usable_size(mem);
---
>         -:   86:	memcount -= malloc_usable_size(mem);
171c171
<         -:   89:}
---
>     #####:   89:}
177c177
<     #####:   83:	if(!mem){
---
>         -:   83:	if(!mem){
180c180
<     #####:   86:	memcount -= malloc_usable_size(mem);
---
>         -:   86:	memcount -= malloc_usable_size(mem);
183c183
<         -:   89:}
---
>     #####:   89:}
189c189
<     #####:   83:	if(!mem){
---
>         -:   83:	if(!mem){
192c192
<     #####:   86:	memcount -= malloc_usable_size(mem);
---
>         -:   86:	memcount -= malloc_usable_size(mem);
195c195
<         -:   89:}
---
>     #####:   89:}
201c201
<     #####:   94:	if(mem_limit && memcount + size > mem_limit){
---
>         -:   94:	if(mem_limit && memcount + size > mem_limit){
208,211c208,211
<     #####:  101:	if(mem){
<     #####:  102:		memcount += malloc_usable_size(mem);
<     #####:  103:		if(memcount > max_memcount){
<     #####:  104:			max_memcount = memcount;
---
>         -:  101:	if(mem){
>         -:  102:		memcount += malloc_usable_size(mem);
>         -:  103:		if(memcount > max_memcount){
>         -:  104:			max_memcount = memcount;
216c216
<         -:  109:	return mem;
---
>     #####:  109:	return mem;
223c223
<     #####:   94:	if(mem_limit && memcount + size > mem_limit){
---
>         -:   94:	if(mem_limit && memcount + size > mem_limit){
230,233c230,233
<     #####:  101:	if(mem){
<     #####:  102:		memcount += malloc_usable_size(mem);
<     #####:  103:		if(memcount > max_memcount){
<     #####:  104:			max_memcount = memcount;
---
>         -:  101:	if(mem){
>         -:  102:		memcount += malloc_usable_size(mem);
>         -:  103:		if(memcount > max_memcount){
>         -:  104:			max_memcount = memcount;
238c238
<         -:  109:	return mem;
---
>     #####:  109:	return mem;
245c245
<     #####:   94:	if(mem_limit && memcount + size > mem_limit){
---
>         -:   94:	if(mem_limit && memcount + size > mem_limit){
252,255c252,255
<     #####:  101:	if(mem){
<     #####:  102:		memcount += malloc_usable_size(mem);
<     #####:  103:		if(memcount > max_memcount){
<     #####:  104:			max_memcount = memcount;
---
>         -:  101:	if(mem){
>         -:  102:		memcount += malloc_usable_size(mem);
>         -:  103:		if(memcount > max_memcount){
>         -:  104:			max_memcount = memcount;
260c260
<         -:  109:	return mem;
---
>     #####:  109:	return mem;
265c265
<     #####:  113:unsigned long mosquitto__memory_used(void)
---
>         -:  113:unsigned long mosquitto__memory_used(void)
267c267
<     #####:  115:	return memcount;
---
>         -:  115:	return memcount;
269,281d268
< ------------------
< mosquitto__memory_used:
<     #####:  113:unsigned long mosquitto__memory_used(void)
<         -:  114:{
<     #####:  115:	return memcount;
<         -:  116:}
< ------------------
< mosquitto__memory_used:
<     #####:  113:unsigned long mosquitto__memory_used(void)
<         -:  114:{
<     #####:  115:	return memcount;
<         -:  116:}
< ------------------
283c270
<     #####:  118:unsigned long mosquitto__max_memory_used(void)
---
>         -:  118:unsigned long mosquitto__max_memory_used(void)
285c272
<     #####:  120:	return max_memcount;
---
>         -:  120:	return max_memcount;
287,299d273
< ------------------
< mosquitto__max_memory_used:
<     #####:  118:unsigned long mosquitto__max_memory_used(void)
<         -:  119:{
<     #####:  120:	return max_memcount;
<         -:  121:}
< ------------------
< mosquitto__max_memory_used:
<     #####:  118:unsigned long mosquitto__max_memory_used(void)
<         -:  119:{
<     #####:  120:	return max_memcount;
<         -:  121:}
< ------------------
305c279
<     #####:  127:	if(mem_limit && memcount + size > mem_limit){
---
>         -:  127:	if(mem_limit && memcount + size > mem_limit){
311,312c285,286
<     #####:  133:	if(ptr){
<     #####:  134:		memcount -= malloc_usable_size(ptr);
---
>         -:  133:	if(ptr){
>         -:  134:		memcount -= malloc_usable_size(ptr);
318,321c292,295
<     #####:  140:	if(mem){
<     #####:  141:		memcount += malloc_usable_size(mem);
<     #####:  142:		if(memcount > max_memcount){
<     #####:  143:			max_memcount = memcount;
---
>         -:  140:	if(mem){
>         -:  141:		memcount += malloc_usable_size(mem);
>         -:  142:		if(memcount > max_memcount){
>         -:  143:			max_memcount = memcount;
326c300
<         -:  148:	return mem;
---
>     #####:  148:	return mem;
333c307
<     #####:  127:	if(mem_limit && memcount + size > mem_limit){
---
>         -:  127:	if(mem_limit && memcount + size > mem_limit){
339,340c313,314
<     #####:  133:	if(ptr){
<     #####:  134:		memcount -= malloc_usable_size(ptr);
---
>         -:  133:	if(ptr){
>         -:  134:		memcount -= malloc_usable_size(ptr);
346,349c320,323
<     #####:  140:	if(mem){
<     #####:  141:		memcount += malloc_usable_size(mem);
<     #####:  142:		if(memcount > max_memcount){
<     #####:  143:			max_memcount = memcount;
---
>         -:  140:	if(mem){
>         -:  141:		memcount += malloc_usable_size(mem);
>         -:  142:		if(memcount > max_memcount){
>         -:  143:			max_memcount = memcount;
354c328
<         -:  148:	return mem;
---
>     #####:  148:	return mem;
361c335
<     #####:  127:	if(mem_limit && memcount + size > mem_limit){
---
>         -:  127:	if(mem_limit && memcount + size > mem_limit){
367,368c341,342
<     #####:  133:	if(ptr){
<     #####:  134:		memcount -= malloc_usable_size(ptr);
---
>         -:  133:	if(ptr){
>         -:  134:		memcount -= malloc_usable_size(ptr);
374,377c348,351
<     #####:  140:	if(mem){
<     #####:  141:		memcount += malloc_usable_size(mem);
<     #####:  142:		if(memcount > max_memcount){
<     #####:  143:			max_memcount = memcount;
---
>         -:  140:	if(mem){
>         -:  141:		memcount += malloc_usable_size(mem);
>         -:  142:		if(memcount > max_memcount){
>         -:  143:			max_memcount = memcount;
382c356
<         -:  148:	return mem;
---
>     #####:  148:	return mem;
389c363
<     #####:  154:	if(mem_limit && memcount + strlen(s) > mem_limit){
---
>         -:  154:	if(mem_limit && memcount + strlen(s) > mem_limit){
396,399c370,373
<     #####:  161:	if(str){
<     #####:  162:		memcount += malloc_usable_size(str);
<     #####:  163:		if(memcount > max_memcount){
<     #####:  164:			max_memcount = memcount;
---
>         -:  161:	if(str){
>         -:  162:		memcount += malloc_usable_size(str);
>         -:  163:		if(memcount > max_memcount){
>         -:  164:			max_memcount = memcount;
404c378
<         -:  169:	return str;
---
>     #####:  169:	return str;
