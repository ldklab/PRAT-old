        -:    0:Source:/home/ryan/git/OpenDDS-debloat/ACE_wrappers/ace/checked_iterator.h
        -:    0:Programs:51
        -:    1:// -*- C++ -*-
        -:    2:
        -:    3:#ifndef ACE_CHECKED_ITERATOR_H
        -:    4:#define ACE_CHECKED_ITERATOR_H
        -:    5:
        -:    6:/**
        -:    7: * @file checked_iterator.h
        -:    8: *
        -:    9: * @brief Checked iterator factory function.
        -:   10: *
        -:   11: * Some compilers (e.g. MSVC++ >= 8) issue security related
        -:   12: * diagnostics if algorithms such as std::copy() are used in an unsafe
        -:   13: * way.  Normally this isn't an issue if STL container iterators are
        -:   14: * used in conjuction with the standard algorithms.  However, in cases
        -:   15: * where application-specific iterators are use with standard
        -:   16: * algorithms that could potentially overrun a buffer, extra care must
        -:   17: * be taken to prevent such an overrun.  If supported, checked
        -:   18: * iterators can be used to address the potential destination buffer
        -:   19: * overrun.
        -:   20: *
        -:   21: * This header provides function templates that generate the
        -:   22: * appropriate checked iterator.  In cases where checked iterators are
        -:   23: * not supported, the pointer passed to the function is returned
        -:   24: * instead.
        -:   25: *
        -:   26: * $Id$
        -:   27: *
        -:   28: * @internal The functions and types in this header are meant for
        -:   29: *           internal use.  They may change at any point between
        -:   30: *           releases.
        -:   31: *
        -:   32: * @author Ossama Othman
        -:   33: */
        -:   34:
        -:   35:# if defined (_MSC_VER) && (_MSC_FULL_VER >= 140050000) && (!defined (_STLPORT_VERSION))
        -:   36:// Checked iterators are currently only supported in MSVC++ 8 or better.
        -:   37:#  include <iterator>
        -:   38:# endif  /* _MSC_VER >= 1400 && !_STLPORT_VERSION */
        -:   39:
        -:   40:# if defined (_MSC_VER) && (_MSC_FULL_VER >= 140050000) && (!defined (_STLPORT_VERSION))
        -:   41:template <typename PTR>
        -:   42:stdext::checked_array_iterator<PTR>
        -:   43:ACE_make_checked_array_iterator (PTR buf, size_t len)
        -:   44:{
        -:   45:  return stdext::checked_array_iterator<PTR> (buf, len);
        -:   46:}
        -:   47:# else
        -:   48:template <typename PTR>
        -:   49:PTR
    #####:   50:ACE_make_checked_array_iterator (PTR buf, size_t /* len */)
        -:   51:{
        -:   52:  // Checked iterators are unsupported.  Just return the pointer to
        -:   53:  // the buffer itself.
    #####:   54:  return buf;
        -:   55:}
        -:   56:# endif  /* _MSC_VER >= 1400 && !_STLPORT_VERSION */
        -:   57:
        -:   58:#endif  /* ACE_CHECKED_ITERATOR_H */
