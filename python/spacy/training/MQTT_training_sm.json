{"content": "ï»¿After a Network Connection is established by a Client to a Server, the first Packet sent from the Client to the Server MUST be a CONNECT Packet [MQTT-3.1.0-1].","annotation":[{"label":["Network Transport"],"points":[{"start":138,"end":143,"text":"Packet"}]},{"label":["Control Packets"],"points":[{"start":130,"end":143,"text":"CONNECT Packet"}]},{"label":["Control Packets"],"points":[{"start":130,"end":136,"text":"CONNECT"}]},{"label":["Required"],"points":[{"start":120,"end":123,"text":"MUST"}]},{"label":["Operational Behavior"],"points":[{"start":113,"end":118,"text":"Server"}]},{"label":["Operational Behavior"],"points":[{"start":99,"end":104,"text":"Client"}]},{"label":["Network Transport"],"points":[{"start":78,"end":83,"text":"Packet"}]},{"label":["Operational Behavior"],"points":[{"start":60,"end":65,"text":"Server"}]},{"label":["Operational Behavior"],"points":[{"start":48,"end":53,"text":"Client"}]},{"label":["Network Transport"],"points":[{"start":9,"end":26,"text":"Network Connection"}]}],"extras":null,"metadata":{"first_done_at":1553522348000,"last_updated_at":1553522348000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "A Client can only send the CONNECT Packet once over a Network Connection. The Server MUST process a second CONNECT Packet sent from a Client as a protocol violation and disconnect the Client [MQTT-3.1.0-2].  See section 4.8 for information about handling errors.","annotation":[{"label":["Operational Behavior"],"points":[{"start":184,"end":189,"text":"Client"}]},{"label":["Operational Behavior"],"points":[{"start":134,"end":139,"text":"Client"}]},{"label":["Control Packets"],"points":[{"start":107,"end":120,"text":"CONNECT Packet"}]},{"label":["Control Packets"],"points":[{"start":107,"end":113,"text":"CONNECT"}]},{"label":["Required"],"points":[{"start":85,"end":88,"text":"MUST"}]},{"label":["Operational Behavior"],"points":[{"start":78,"end":83,"text":"Server"}]},{"label":["Control Packets"],"points":[{"start":27,"end":40,"text":"CONNECT Packet"}]},{"label":["Control Packets"],"points":[{"start":27,"end":33,"text":"CONNECT"}]},{"label":["Operational Behavior"],"points":[{"start":2,"end":7,"text":"Client"}]}],"extras":null,"metadata":{"first_done_at":1553522111000,"last_updated_at":1553522111000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "The payload contains one or more encoded fields. They specify a unique Client identifier for the Client, a Will topic, Will Message, User Name and Password. All but the Client identifier are optional and their presence is determined based on flags in the variable header.","annotation":[{"label":["Network Transport"],"points":[{"start":264,"end":269,"text":"header"}]},{"label":["Operational Behavior"],"points":[{"start":242,"end":246,"text":"flags"}]},{"label":["Optional"],"points":[{"start":191,"end":198,"text":"optional"}]},{"label":["Operational Behavior"],"points":[{"start":169,"end":174,"text":"Client"}]},{"label":["Security"],"points":[{"start":147,"end":154,"text":"Password"}]},{"label":["Security"],"points":[{"start":133,"end":141,"text":"User Name"}]},{"label":["Operational Behavior"],"points":[{"start":97,"end":102,"text":"Client"}]},{"label":["Operational Behavior"],"points":[{"start":71,"end":76,"text":"Client"}]},{"label":["Operational Behavior"],"points":[{"start":41,"end":46,"text":"fields"}]},{"label":["Network Transport"],"points":[{"start":4,"end":10,"text":"payload"}]}],"extras":null,"metadata":{"first_done_at":1553522175000,"last_updated_at":1553522175000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "The MQTT protocol requires an underlying transport that provides an ordered, lossless, stream of bytes from the Client to Server and Server to Client.","annotation":[{"label":["Operational Behavior"],"points":[{"start":143,"end":148,"text":"Client"}]},{"label":["Operational Behavior"],"points":[{"start":133,"end":138,"text":"Server"}]},{"label":["Operational Behavior"],"points":[{"start":122,"end":127,"text":"Server"}]},{"label":["Operational Behavior"],"points":[{"start":112,"end":117,"text":"Client"}]},{"label":["Network Transport"],"points":[{"start":4,"end":7,"text":"MQTT"}]}],"extras":null,"metadata":{"first_done_at":1553522373000,"last_updated_at":1553522373000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "Connectionless network transports such as User Datagram Protocol (UDP) are not suitable on their own because they might lose or reorder data.","annotation":[{"label":["Network Transport"],"points":[{"start":66,"end":68,"text":"UDP"}]},{"label":["Network Transport"],"points":[{"start":42,"end":63,"text":"User Datagram Protocol"}]},{"label":["Network Transport"],"points":[{"start":0,"end":13,"text":"Connectionless"}]}],"extras":null,"metadata":{"first_done_at":1553522291000,"last_updated_at":1553522291000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "Retained messages do not form part of the Session state in the Server. The Server SHOULD retain such messages until deleted by a Client.","annotation":[{"label":["Operational Behavior"],"points":[{"start":129,"end":134,"text":"Client"}]},{"label":["Optional"],"points":[{"start":82,"end":87,"text":"SHOULD"}]},{"label":["Operational Behavior"],"points":[{"start":75,"end":80,"text":"Server"}]},{"label":["Operational Behavior"],"points":[{"start":63,"end":68,"text":"Server"}]},{"label":["Operational Behavior"],"points":[{"start":42,"end":48,"text":"Session"}]}],"extras":null,"metadata":{"first_done_at":1553522066000,"last_updated_at":1553522066000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "The CONNECT Packet contains Username and Password fields. Implementations can choose how to make use of the content of these fields. They may provide their own authentication mechanism, use an external authentication system such as LDAP [RFC4511] or OAuth [RFC6749] tokens, or leverage operating system authentication mechanisms.","annotation":[{"label":["Security"],"points":[{"start":303,"end":316,"text":"authentication"}]},{"label":["Security"],"points":[{"start":266,"end":271,"text":"tokens"}]},{"label":["Security"],"points":[{"start":250,"end":254,"text":"OAuth"}]},{"label":["Security"],"points":[{"start":232,"end":235,"text":"LDAP"}]},{"label":["Security"],"points":[{"start":202,"end":215,"text":"authentication"}]},{"label":["Security"],"points":[{"start":160,"end":173,"text":"authentication"}]},{"label":["Operational Behavior"],"points":[{"start":125,"end":130,"text":"fields"}]},{"label":["Operational Behavior"],"points":[{"start":50,"end":55,"text":"fields"}]},{"label":["Security"],"points":[{"start":41,"end":48,"text":"Password"}]},{"label":["Security"],"points":[{"start":28,"end":35,"text":"Username"}]},{"label":["Control Packets"],"points":[{"start":4,"end":17,"text":"CONNECT Packet"}]},{"label":["Control Packets"],"points":[{"start":4,"end":10,"text":"CONNECT"}]}],"extras":null,"metadata":{"first_done_at":1553522032000,"last_updated_at":1553522032000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "Implementations passing authentication data in clear text, obfuscating such data elements or requiring no authentication data should be aware this can give rise to Man-in-the-Middle and replay attacks. Section 5.4.5 introduces approaches to ensure data privacy.","annotation":[{"label":["Security"],"points":[{"start":253,"end":259,"text":"privacy"}]},{"label":["Security"],"points":[{"start":248,"end":259,"text":"data privacy"}]},{"label":["Security"],"points":[{"start":186,"end":199,"text":"replay attacks"}]},{"label":["Security"],"points":[{"start":164,"end":180,"text":"Man-in-the-Middle"}]},{"label":["Optional"],"points":[{"start":126,"end":131,"text":"should"}]},{"label":["Security"],"points":[{"start":106,"end":119,"text":"authentication"}]},{"label":["Security"],"points":[{"start":59,"end":69,"text":"obfuscating"}]},{"label":["Security"],"points":[{"start":47,"end":56,"text":"clear text"}]},{"label":["Security"],"points":[{"start":24,"end":37,"text":"authentication"}]}],"extras":null,"metadata":{"first_done_at":1553522520000,"last_updated_at":1553522520000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "A Virtual Private Network (VPN) between the Clients and Servers can provide confidence that data is only being received from authorized Clients.","annotation":[{"label":["Operational Behavior"],"points":[{"start":136,"end":142,"text":"Clients"}]},{"label":["Security"],"points":[{"start":125,"end":134,"text":"authorized"}]},{"label":["Security"],"points":[{"start":76,"end":85,"text":"confidence"}]},{"label":["Optional"],"points":[{"start":64,"end":66,"text":"can"}]},{"label":["Operational Behavior"],"points":[{"start":56,"end":62,"text":"Servers"}]},{"label":["Operational Behavior"],"points":[{"start":44,"end":50,"text":"Clients"}]},{"label":["Security"],"points":[{"start":27,"end":29,"text":"VPN"}]},{"label":["Security"],"points":[{"start":2,"end":24,"text":"Virtual Private Network"}]}],"extras":null,"metadata":{"first_done_at":1553522467000,"last_updated_at":1553522467000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "Where TLS [RFC5246] is used, SSL Certificates sent from the Client can be used by the Server to authenticate the Client.","annotation":[{"label":["Operational Behavior"],"points":[{"start":113,"end":118,"text":"Client"}]},{"label":["Security"],"points":[{"start":96,"end":107,"text":"authenticate"}]},{"label":["Operational Behavior"],"points":[{"start":86,"end":91,"text":"Server"}]},{"label":["Optional"],"points":[{"start":67,"end":69,"text":"can"}]},{"label":["Operational Behavior"],"points":[{"start":60,"end":65,"text":"Client"}]},{"label":["Security"],"points":[{"start":33,"end":44,"text":"Certificates"}]},{"label":["Security"],"points":[{"start":29,"end":44,"text":"SSL Certificates"}]},{"label":["Security"],"points":[{"start":29,"end":31,"text":"SSL"}]},{"label":["Security"],"points":[{"start":6,"end":8,"text":"TLS"}]}],"extras":null,"metadata":{"first_done_at":1553522418000,"last_updated_at":1553522418000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
{"content": "An implementation might allow for authentication where the credentials are sent in an Application Message from the Client to the Server.","annotation":[{"label":["Operational Behavior"],"points":[{"start":129,"end":134,"text":"Server"}]},{"label":["Operational Behavior"],"points":[{"start":115,"end":120,"text":"Client"}]},{"label":["Operational Behavior"],"points":[{"start":86,"end":104,"text":"Application Message"}]},{"label":["Security"],"points":[{"start":59,"end":69,"text":"credentials"}]},{"label":["Security"],"points":[{"start":34,"end":47,"text":"authentication"}]},{"label":["Optional"],"points":[{"start":18,"end":22,"text":"might"}]}],"extras":null,"metadata":{"first_done_at":1553522247000,"last_updated_at":1553522247000,"sec_taken":0,"last_updated_by":"LP5wMBkNOYUnHYDoxzDi0rUaFyc2","status":"done","evaluation":"NONE"}}
